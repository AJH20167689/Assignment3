<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>#Assignment3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body class="font-sans">
    <div class="max-h-[400px] overflow-y-auto -webkit-overflow-scrolling-touch mt-5 border border-blue-300 rounded-md px-5">
        <table class="w-full border-separate border-spacing-0">
            <thead class="sticky top-0 z-10">
                <tr>
                    <th class="p-3 text-left bg-blue-100 font-bold text-blue-800 border-b border-blue-300">Year</th>
                    <th class="p-3 text-left bg-blue-100 font-bold text-blue-800 border-b border-blue-300">Semester</th>
                    <th class="p-3 text-left bg-blue-100 font-bold text-blue-800 border-b border-blue-300">The Programs</th>
                    <th class="p-3 text-left bg-blue-100 font-bold text-blue-800 border-b border-blue-300">Nationality</th>
                    <th class="p-3 text-left bg-blue-100 font-bold text-blue-800 border-b border-blue-300">Colleges</th>
                    <th class="p-3 text-left bg-blue-100 font-bold text-blue-800 border-b border-blue-300">No. Of Students</th>
                </tr>
            </thead>
            <tbody id="dataTableBody">
            </tbody>
        </table>
    </div>

    <script>
        // API URL to fetch data from
        const URL = "https://data.gov.bh/api/explore/v2.1/catalog/datasets/01-statistics-of-students-nationalities_updated/records?where=colleges%20like%20%22IT%22%20AND%20the_programs%20like%20%22bachelor%22&limit=100";

        // Fetch data from the API
        fetch(URL)
            .then(response => response.json())
            .then(data => {
                const results = data.results;
                const tableBody = document.getElementById('dataTableBody');
                const columns = ['year', 'semester', 'the_programs', 'nationality', 'colleges', 'number_of_students'];

                // Loop through the results and generate the rows
                results.forEach(item => {
                    const row = document.createElement('tr');
                    row.classList.add('even:bg-blue-50', 'hover:bg-blue-100');

                    // Create table data cells for each field in the row
                    columns.forEach(field => {
                        const cell = document.createElement('td');
                        cell.classList.add('p-3', 'border-b', 'border-blue-300');
                        cell.setAttribute('data-label', field.replace(/_/g, ' ').toUpperCase());

                        // Append the field value to the cell
                        cell.textContent = item[field] || ''; // Default to empty string if field is missing
                        row.appendChild(cell);
                    });

                    // Append the row to the table body
                    tableBody.appendChild(row);
                });
            })
            .catch(error => {
                console.error('Error fetching data:', error);
            });
    </script>
</body>

</html>
